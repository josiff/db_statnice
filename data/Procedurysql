/*create or replace procedure PrveKolo as
Cursor cur1 is 
select km.ID_KOMISIE as komisia, to_char(tm.CAS_ZACIATIA, 'HH:MM') as od, pr.OS_STUDENT as student, sp.ST_ODBOR as odbor, sp. ST_ZAMERANIE as zameranie, sp.OBHAJOBA as obhajoba
from praca pr
join ucitelia uc on(pr.OS_VEDUCI = uc.OS_CISLO)
join komisie km on(km.ID_KOMISIE = uc.ID_KOMISIE)
join terminy tm on(tm.ID_TERMIN = km.ID_TERMIN)
join student st on(st.OS_CISLO = pr.OS_STUDENT)
join st_program sp on (sp.ST_ODBOR = st.ST_ODBOR AND sp.ST_ZAMERANIE = st.ST_ZAMERANIE)
join ucitel u on(uc.os_cislo = u.os_cislo)
where u.ST_ODBOR = sp.ST_ODBOR and u.ST_ZAMERANIE = sp.ST_ZAMERANIE and 
uc.ID_FUN = 1;
begin 
  
  FOR ou_rec IN cur1 LOOP
  
      
	  dbms_output.put_line(ou_rec.komisia || ' ' ||  ou_rec.od || ' ' || ou_rec.student || ' ' || ou_rec.odbor || ' ' || ou_rec.zameranie || ' ' || ou_rec.obhajoba );
    
	
	 
	      
      
  END LOOP;
    
    
end PrveKolo;*/

/*vlozenie studenta*/

/*create or replace procedure VlozStudenta (p_komisia int, p_cas_zacatia date, p_kolo int, p_student int ) as
sql_stmt varchar2(1000);
begin 

sql_stmt:='insert into zap_studenti(id_komisie, cas_zacatia, kolo, os_cislo)';
sql_stmt:= sql_stmt ||' values(:1,:2,:3,:4) '; 


EXECUTE IMMEDIATE sql_stmt USING p_komisia, p_cas_zacatia, p_kolo, p_student;


end VlozStudenta;*/


/*create or replace procedure GetStudents as
Cursor cur1 is 
select  pr.OS_STUDENT as student, pr.ROK as rok, pr.SEMESTER as semester, pr.OS_VEDUCI as veduci from praca pr
where pr.ROK = 2015 and pr.SEMESTER = 'L'
and NOT EXISTS (select 'x' from ZAP_STUDENTI zs
where zs.OS_CISLO = pr.OS_STUDENT
and zs.ROK = pr.ROK and zs.SEMESTER = pr.SEMESTER)  order by pr.OS_STUDENT;
begin 
  
  FOR ou_rec IN cur1 LOOP
  
      
	  dbms_output.put_line(ou_rec.student || ' ' ||  ou_rec.rok || ' ' || ou_rec.semester || ' ' || ou_rec.veduci /*|| ' ' || ou_rec. || ' ' || ou_rec.obhajoba*/ );
    
	
	 
	      
      
  /*END LOOP; 
    
    
end GetStudents;*/














